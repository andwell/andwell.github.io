<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Guo's Page">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Guo's Page">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Guo's Page">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Guo's Page </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Guo's Page</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">iOS随笔杂文</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/Network/" itemprop="url">
                  58同城移动客户端iOS网络库设计实践
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-14T14:18:26+08:00" content="2016-08-14">
              2016-08-14
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="开篇之前"><a href="#开篇之前" class="headerlink" title="开篇之前"></a>开篇之前</h2><p>关于移动客户端网络层设计相关的文章可能已经数不胜数了，所以原本并没打算单独开篇来讲这块，鉴于近期有同事说要我写个网络库的介绍文档，我就干脆写篇博文吧，从网络层的设计之初思考的问题到后期更新一并娓娓道来，权当设计文档讲解了。</p>
<h2 id="移动端网络层设计考虑的问题"><a href="#移动端网络层设计考虑的问题" class="headerlink" title="移动端网络层设计考虑的问题"></a>移动端网络层设计考虑的问题</h2><p>一个良好的封装往往耗时最多是在前期的思考上，同样在网络库设计之初，我们把大部分时间花在考虑以下几个问题上。</p>
<ul>
<li>使用者如何去调用API</li>
<li>以什么方式回调给业务层调用者</li>
<li>将什么样的数据交付给调用者</li>
<li>如何优化网络层</li>
</ul>
<p>然而判断一个代码封装乃至架构的好坏，不仅仅是使用者口中的使用方便与否，更为重要的是能否满足你现有的业务需求，并在不断变化的需求中依然适用，基于以上考虑并提升体验，在设计网络库时我们又额外做到了哪些？</p>
<ul>
<li>特殊应用场景实现多个网络请求的依赖与优先级(并发顺序管理)</li>
<li>根据当前设备网络状态(2G/3G/4G/wifi)实时切换请求超时</li>
<li>根据当前设备网络状态实时改变网络请求并发数量</li>
<li>快速适配ipv6及https网络环境</li>
<li>保持同步对接<code>NSURLSession</code></li>
</ul>
<h3 id="使用者如何去调用API"><a href="#使用者如何去调用API" class="headerlink" title="使用者如何去调用API"></a>使用者如何去调用API</h3><p>无论什么样的封装，都需要考虑开放什么样的API接口供人调用才最合适，相信大部分RD都比较反感某个类一大堆的API，尤其是那些十分相似的API(可能仅仅只差个别形参而已)，我们一直秉承简单的原则，API简单实用即可(第三方开源库除外)。同时我们必须要面对的另外一个问题是：业务层RD如何去调用这个基础库的API？常用的两种方式：</p>
<ul>
<li>集中式调用API</li>
<li>分散构造式调用API</li>
</ul>
<p>类似<code>SDWebImage</code>无需单独构建并去引用实例来使用就可以说是一种集中式调用API,构造与引用都是调用者本体，然而类似<code>AFNetworking</code>在其3.0之前版本我们常用的<code>AFNetworkOpreation</code>每次使用时都是单独构造初始化且作为属性引用的方式就是分散式调用API。当然两种方式各有优劣，找准适合自己的就好。从我们APP之前RD使用AFN的角度来讲下：</p>
<ol>
<li><strong>劣势：</strong> 使用<code>AFNetworkOpreation</code>作为属性来发起每一个网络请求，当某个模块需要同时发起多个请求时便需要维护多个实例变量，尤其在MRC的年代，模块析构时-dealloc方法中忘记置空请求的实例，经常发生垂悬指针(野指针)导致crash的情况，从而增加了维护其生命周期的工作。</li>
<li><strong>优势：</strong> 分散式的调用由于其生命周期自行管理与API调用，debug就显得更为方便。</li>
</ol>
<p>目前我们选择集中式调用的方式，无论何时何地需要发起网络请求时只需获取网络库的单例对象直接调用API即可，这样就简化了业务调用者维护其生命周期的成本，结合下文我会讲其他的优势。</p>
<h3 id="以什么方式回调给业务层调用者"><a href="#以什么方式回调给业务层调用者" class="headerlink" title="以什么方式回调给业务层调用者"></a>以什么方式回调给业务层调用者</h3><p>当我在参与公司第一次职级评审时，曾就遇到过某总监问过我这样你个问题：你认为<code>delegate</code>与<code>block</code>最大的区别在哪里？两者的应用场景是否能互换来实现？我就以网络层的回调方式来回答并讲解。目前iOS常用的回调方式有：</p>
<ul>
<li>消息通知<code>NSNotification</code>方式</li>
<li>委托代理<code>delegate</code>方式</li>
<li>函数块<code>block</code>方式</li>
</ul>
<p>接下来我一一说下这几种方式的优劣与我理解的适用场景吧</p>
<ol>
<li><code>NSNotification</code>这是解耦神器，可以简单实现跨层调用，调用不留痕、耦合极低，然而由于其为广播式的扩散，控制不好便容易带来跨层bug,尤其是在通知重名的情况下。所以其更为适用：局部跨层调用。</li>
<li><code>delegate</code>其实与直接调用的方式差不多，只不过是被委托方引用了委托者指针从而实现了随时调用委托方的方法(协议)。这种方式的劣势在于，比如同一模块发起多个请求，相应的完成回调都会经过同一个协议方法，这样你想区分是谁的回调就稍微麻烦了。所以其更为适用：单一调用的回调(每个模块就一个调用者或者无需区分调用者)。</li>
<li><code>block</code>这是一个在iOS5以后被广泛使用的回调方式，从Apple系统类库中便能找到不少印证，同时也是最好的学习使用的地方。先说说优势，使用之处便是回调之处，直观易维护；其劣势，函数指针的引用会延长代码块内对象的生命周期，而且在某些时候不利于debug(看xcode左侧的调用栈你也许会比较迷茫)。所以其更为适用：熟悉block内存管理的前提下，不出现循环block调用时的应用场景。</li>
</ol>
<p>目前我们选择的是<code>block</code>方式，上面我也讲到了我们使用<strong>集中式调用</strong>的方式，这样调用之处就是回调之处显得更方便与重要了。想想如果这时再使用<code>delegate</code>的回调方式，是不是细思极恐？</p>
<h3 id="将什么样的数据交付给调用者"><a href="#将什么样的数据交付给调用者" class="headerlink" title="将什么样的数据交付给调用者"></a>将什么样的数据交付给调用者</h3><p>这可能是个比较有争议的话题，回想当年我刚接触iOS的时候，在那个处处都讲MVC的年代，第一任公司APP大部分模块都是Model化的，任何有view的地方几乎都能见到其对应的model,这样的好处是层次分明，便于维护，但处处都新建model也显得略微麻烦(即使我们是自动化建model类)。这就引出了，我们在封装网络库时能选择的两种数据交付方式：</p>
<ul>
<li>服务端数据经过序列化后再转化为特定的数据结构Model交付业务层</li>
<li>服务端数据经过序列化后的<code>NSData</code>或者字典、数组等系统自带数据结构交付业务层</li>
</ul>
<p>同样，我的看法是什么样的方式适合你当前的业务层架构就选什么方式。model化固然是好，但同样会增加转化组装的时间成本，有时候直接使用字典的k-v数据结构已方便了就没必要交付model化后的数据，model适用的场景：当view层频繁会依据数据的变更来更新视图，比如 某个列表中有单选框，勾选个别行的操作，直接改变model化后数据比改变<code>NSDictionary</code>的个别数据就容易的多。所以说坚持去model化也未必是好，比如 我们有个重要的模块，要求数据来了以后上层直接过滤掉错误数据，这就利用网络库自动model化数据来容错就比在业务层再挨个处理就显得机智许多。总结：结合业务场景混合使用更好。</p>
<h3 id="如何优化网络层"><a href="#如何优化网络层" class="headerlink" title="如何优化网络层"></a>如何优化网络层</h3><p>移动客户端对于网络层可以优化的地方，目前应该是比较成熟固定了，也许谷歌、度娘一下就是一大堆，我就列举几方面不再累述了：</p>
<ul>
<li>建立链路复用(spdy等）</li>
<li>DNS解析耗时使用IP直连或者cdn选择就近服务器节点下发数据</li>
<li>数据传输阶段GZIP或者数据复用</li>
<li>客户端缓存策略</li>
</ul>
<h3 id="关于我们网络库的设计"><a href="#关于我们网络库的设计" class="headerlink" title="关于我们网络库的设计"></a>关于我们网络库的设计</h3><p>如何做到网络请求的依赖与优先级管理，以及为了提升用户体验我们做到了根据网络环境变化来实时切换并发数与请求超时的策略，可以直观的看设计示意图：</p>
<p><img src="/images/network121.png" alt=""><br>虽然图中并没直接指出具体实现，但不难想到具体逻辑。关于请求超时的计算，粒度并不如Facebook他们做的细，利用RTT(往返时延)每次请求由服务端来实时返回，效果会更加。</p>
<h4 id="关于适配ipv6"><a href="#关于适配ipv6" class="headerlink" title="关于适配ipv6"></a>关于适配ipv6</h4><p>同样我们可以从上图能看到网络监控的模块，基于苹果给出的源码类<code>reachability</code>再开发，并且实现网络状态(2G/3G/4G/wifi)变化的监控。严格把控APP内IP直连的接口，按照Apple文档修改即可。</p>
<h4 id="关于对接同步NSURLSession"><a href="#关于对接同步NSURLSession" class="headerlink" title="关于对接同步NSURLSession"></a>关于对接同步<code>NSURLSession</code></h4><p>AFN3.0已经作出了相应更改支持<code>NSURLSession</code>，但是并不能很好的解决线程优先级、依赖等问题，所以我们摒弃直接使用AFN，保留了其请求前配置相关和数据返回后序列化相关的思路，取其精华去其糟粕的开发出了新的底层网络库，如上示意图。细节开发与设计，留于下篇讲解吧。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/06/16/first/" itemprop="url">
                  IOS动态更新--framework实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-06-16T23:49:26+08:00" content="2015-06-16">
              2015-06-16
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="程序从编辑到运行经历的阶段"><a href="#程序从编辑到运行经历的阶段" class="headerlink" title="程序从编辑到运行经历的阶段"></a>程序从编辑到运行经历的阶段</h3><p>预编译 &gt;&gt; 编译(Compile) &gt;&gt; 链接(Link) &gt;&gt; 运行(Run)<br>众所周知<strong>Objective-C</strong>为消息型语言，与<strong>C++/Java</strong>不同的是将一些决定从编译和链接时推迟到运行时。</p>
<h2 id="什么是Framework"><a href="#什么是Framework" class="headerlink" title="什么是Framework"></a>什么是Framework</h2><p>所谓Framework从字面来看就是个<strong>框架</strong>，此框架并非架构、设计而言的结果，而是相对文件组成而言的封装。</p>
<h3 id="framework由什么组成"><a href="#framework由什么组成" class="headerlink" title="framework由什么组成"></a>framework由什么组成</h3><p>用苹果自己的话就是:</p>
<blockquote>
<p><em>Frameworks are a collection of code and resources to encapsulate functionality…</em>   </p>
</blockquote>
<p>简单来说就是 <strong>资源+代码</strong> 等文件的集成。如下图: 百度地图SDK<br><img src="/images/framework.png" alt=""> </p>
<h3 id="怎么制作framework"><a href="#怎么制作framework" class="headerlink" title="怎么制作framework"></a>怎么制作framework</h3><p>苹果的库有<strong>静态库(.a)</strong>、<strong>动态库(.dylib)</strong>，早期第三方项目的代码像分享SDK或者openssl依赖库等都是封装成<code>.a</code>的静态库的形式开放的，当然也有不少会做成<code>伪framework</code>的形式(早期Facebook的SDK就是)，像我们以前制作的游戏SDK，其实就是通过脚本把静态库打包成类framework的包。<br><br>然而Apple在2014<em>WWDC</em>大会首次开放了IOS官方制作framework的功能，并集成到了<strong>XCode6</strong>当中。<a href="https://developer.apple.com/library/prerelease/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_6_0.html" target="_blank" rel="external">参考官方介绍</a></p>
<blockquote>
<p><em>Frameworks for iOS. iOS developers can now create dynamic frameworks. Frameworks are a collection of code and resources to encapsulate functionality that is valuable across multiple projects. Frameworks work perfectly with extensions, sharing logic that can be used by both the main application and the bundled extensions.</em>   </p>
</blockquote>
<p>很多人都会疑惑一点：为什么是dynamic framework?<br>难道Apple已开放以framework来动态更新，这其实是个模棱两可的态度。但至少我们认清一个概念: framework分为两种<strong><code>static</code></strong>&amp;<strong><code>dynamic</code></strong>.<br>关于制作方式，网上搜索已经一大堆了，比如<a href="http://blog.csdn.net/like7xiaoben/article/details/44081257" target="_blank" rel="external">参考这篇</a>. </p>
<h3 id="制作framework当中的问题"><a href="#制作framework当中的问题" class="headerlink" title="制作framework当中的问题"></a>制作framework当中的问题</h3><p>既然网上制作方式一大堆，为什么还要写这篇博文呢？出于以下几点:<br>  </p>
<ul>
<li>很多人制作完以后真机不能使用或者报各种错</li>
<li>怎么作签名认证(嵌入provision)</li>
<li>认清应用场景(动态更新)<br><br><br><br>1.真机不能使主要原因在于没有作签名认证。<br>2.签名认证方式:比较简单，在制作framework时选择好相应的code signing<code>Identity</code>和<code>Provisioning Profile</code>即可。<br><img src="/images/framework2.png" alt="">由图上可看出与开放型framework不同的是多了个embedded.mobileprovision文件。<br>同时是支持IOS6及以下的，真机、模拟器皆可。<a href="https://github.com/andwell/Framework" target="_blank" rel="external">代码demo</a><br></li>
</ul>
<h3 id="动态framework运作"><a href="#动态framework运作" class="headerlink" title="动态framework运作"></a>动态framework运作</h3><p>动态库允许应用在需要时将代码内存地址动态的加载，无论是应用启动时还是运行时都可以动态去加载<a href="http://ddeville.me/2014/04/dynamic-linking/" target="_blank" rel="external">参考文章</a>。正如<strong>前言</strong>中提到的最后一步便可按需加载，所以可以为我们在IOS的动态更新当中提供可行性。<br>而在IOS当中苹果有开放的动态实现接口: <code>dlopen</code>加载动态库</p>
<h3 id="苹果审核可行性"><a href="#苹果审核可行性" class="headerlink" title="苹果审核可行性"></a>苹果审核可行性</h3><p>依照苹果审核条例，不允许进行动态更新，所以这一点就是不可避免的风险。<br>如何机智规避：   </p>
<ol>
<li>避免使用dlopen方式加载动态库(上传时便能字符串检测到) 替换方案:<pre><code class="objective-c">NSBundle *bundle = [NSBundle bundleWithPath:frameworkPath];
 if ([bundle loadAndReturnError:&amp;err]) {
     Class frameClass = NSClassFromString(@&quot;AnyFrameworkClass&quot;);
     if (frameClass != nil){
         // alloc and initizal
     }
 }
</code></pre>
</li>
<li>不直接存储.framework文件在沙盒当中，加密或者解压加载后即焚。<br><br><strong>当然这依然还是避免不了人为举报风险（还需酌情使用）</strong></li>
</ol>
<h2 id="IOS动态更新"><a href="#IOS动态更新" class="headerlink" title="IOS动态更新"></a>IOS动态更新</h2><h3 id="动态更新可行方案"><a href="#动态更新可行方案" class="headerlink" title="动态更新可行方案"></a>动态更新可行方案</h3><p>ios应用当中动态更新，目前有几个可行性方案主要包括以下几种:        </p>
<ul>
<li>web加载式动态更新(最常用最古老的方式)</li>
<li>lua文件控制动态更新(最麻烦最糟糕的方式)</li>
<li>react native框架js动态更新(最时髦的方式)</li>
<li>framework模块化后动态库式更新(最危险的方式)    </li>
</ul>
<p>1.第一种主流还是依靠<code>phonegap</code>框架的<code>hybird</code>应用，动态部分依赖web页面来动态改变更新。但在用户体验、native交互方面依然还是硬伤。<br>2.第二种主要是在runtime动态替换object相应的方法或属性来达到动态更新的效果。但<code>.lua</code>文件的编写是个很痛苦的过程，先不说没有相对智能的开发工具，更大的死穴是无调试工具支持。<br>3.React Native是近期Facebook开源的新框架，意在用js开发native APP，目前仅IOS开放开源项目(Android版也将临近)，显而易见修改部分js便可达到动态更新。这需要RD具备js开发技能便足够。<br>4.framework方式便是这篇文章主旨。    </p>
<p>下载并解压当前主流的APP便能看出其使用了何种方案，以下是我看到的结果:       </p>
<ul>
<li>QQ使用了lua来动态更新部分页面</li>
<li>天猫ipad版使用了react native框架</li>
<li>大部分还是Hybird APP</li>
<li>暂未发现有framework动态更新的应用(很遗憾)<br></li>
</ul>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ol>
<li>类游戏应用关卡  </li>
<li>组件化的插件/模块 (类似支付宝插件)</li>
<li>修复线上模块bug (前提是提取出的组件化模块)</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Fangqing Guo" />
          <p class="site-author-name" itemprop="name">Fangqing Guo</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fangqing Guo</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
